
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>

        <title>Mind vortex</title>
        <meta name="description" content="Welcome!" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link type="application/rss+xml" rel="alternate" title="Mind vortex" href="/feed.rss" />
        <link type="application/atom+xml" rel="alternate" title="Mind vortex" href="/feed.atom" />
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">

        <link href="/assets/css/normalize.css" rel="stylesheet" />
        <link href="/assets/css/h5bp.css" rel="stylesheet">
        <link href="/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
        <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,400;0,500;0,700;0,900;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&display=swap" rel="stylesheet">
        <link href="/assets/css/override.css" rel="stylesheet" />
        <link href="/assets/css/github.css" rel="stylesheet" type="text/css">


        <meta name="application-name" content="Mind vortex" />
        <meta name="msapplication-tooltip" content="Mind vortex" />
        <meta name="msapplication-starturl" content="/" />

        <meta property="og:title" content="Mind vortex" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.petrikvandervelde.nl/" />
        <!-- TODO: More social graph meta tags -->

        <script src="/assets/js/jquery.min.js"></script>
        <script src="/assets/js/bootstrap.min.js"></script>
        <script src="/assets/js/highlight.pack.js"></script>
        <script src="/assets/js/clean-blog.js"></script>
        <script src="/assets/js/d3.v3.min.js"></script>
        <script src="/assets/js/trianglify.min.js"></script>
        <script src="/assets/js/Please-compressed.js"></script>

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
                <script src="/assets/js/html5shiv.js"></script>
                <script src="/assets/js/respond.min.js"></script>
        <![endif]-->

        <!-- Our scripts -->
<script src="/assets/js/script.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DV643VJGFT"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-DV643VJGFT');
</script>


    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
        <![endif]-->
        <div id="header" class="container">
            <div id="logo">
                <h1><a href="/">Mind vortex</a></h1>
            </div>
            <div id="menu">
                <ul>
                            <!-- Pages -->
        <!-- BlogPosts -->
        <!-- Tags -->
        <!-- TagIndex -->
        <!-- BlogArchive -->
        <!-- Index -->
    <!-- Context.Documents['Pages'] -->
        <!-- 404 Not Found - False - /404 -->
        <!-- About - True - /about -->
        <!-- Apollo - False - /projects/apollo -->
        <!-- Calvinverse - False - /projects/calvinverse -->
        <!-- nAdoni - False - /projects/nadoni -->
        <!-- nAnicitus - False - /projects/nanicitus -->
        <!-- nBuildKit - False - /projects/nbuildkit -->
        <!-- nRefs - False - /projects/nrefs -->
        <!-- nTreva - False - /projects/ntreva -->
        <!-- Nuclei - False - /projects/nuclei -->
        <!-- Ops-Resource - False - /projects/ops-resource -->
        <!-- Projects - True - /projects -->
        <!-- Sherlock - False - /projects/sherlock -->
            <li class="active" >
                Home
            </li>
            <li class="inactive" >
                <a href="/projects">Projects</a>
            </li>
            <li class="inactive" >
                <a href="/posts">Archive</a>
            </li>
            <li class="inactive" >
                <a href="/tags">Tags</a>
            </li>
            <li class="inactive" >
                <a href="/about">About</a>
            </li>

                </ul>
            </div>
        </div>

        <div id="page" class="container">
            <div id="sidebar">
                <div id="sbox1">
                    <h2>Patrick van der Velde</h2>

<p>
    <img src="https://www.gravatar.com/avatar/9bc8b3ff385cd14f2b12138c97729df2?s=160" alt="Gravatar for Patrick van der Velde">
</p>
<p>
    Dutch software developer who is living, working and playing in New Zealand.
    Rock climber and paragliding pilot. Developer of
    <a href="https://nbuildkit.github.io/nBuildKit.MsBuild/">nBuildKit</a>,
    <a href="https://github.com/Calvinverse">the Calvinverse resources</a> and other projects.
</p>
<p>
    <a href="/about.html">More ...</a>
</p>

                </div>
                <div id="sbox2">
                    <h2>Recent</h2>
                    <ul class="list-unstyled">
                            <li><a href="/posts/Robotics-learning-ros">Starting robotics - Learning Robot Operating System (ROS)</a></li>
                            <li><a href="/posts/Starting-robotics-with-scuttle">Starting robotics with the SCUTTLE robot</a></li>
                            <li><a href="/posts/Building-autonomous-mobile-robot-why">Building an autonomous mobile robot - But why?</a></li>
                            <li><a href="/posts/Software-development-pipeline-security">Software development pipeline - Security</a></li>
                            <li><a href="/posts/Software-development-pipeline-infrastructure-dependency-reduction">Software development pipeline - Infrastructure dependency reduction</a></li>
                            <li><a href="/posts/Calvinverse-an-example-build-infrastructure">Calvinverse - An example build infrastructure</a></li>
                            <li><a href="/posts/On-prem-vs-cloud-build-systems">Software development pipeline - On-prem or in the cloud?</a></li>
                            <li><a href="/posts/Software-development-pipeline-considerations-for-infrastructure-improvements">Software development pipeline - Considerations for infrastructure improvements</a></li>
                            <li><a href="/posts/Sofware-development-pipeline-In-the-build-system-or-not">Software development pipeline - In the build system or not</a></li>
                            <li><a href="/posts/Software-development-pipeline-Design-flexibility">Software development pipeline - Design flexibility</a></li>
                    </ul>
                </div>
                <div id="sbox3">
                    <h2>Tags</h2>
                    <div>
                        <ul class="list-unstyled">
                                <li>
                                    <a role="button" href="/tags/Sherlock" class="btn btn-default btn-sm"> Sherlock (13)</a>
                                </li>
                                <li>
                                    <a role="button" href="/tags/nBuildKit" class="btn btn-default btn-sm"> nBuildKit (12)</a>
                                </li>
                                <li>
                                    <a role="button" href="/tags/Delivering-software" class="btn btn-default btn-sm"> Delivering software (11)</a>
                                </li>
                                <li>
                                    <a role="button" href="/tags/DevOps" class="btn btn-default btn-sm"> DevOps (11)</a>
                                </li>
                                <li>
                                    <a role="button" href="/tags/Software-development-pipeline" class="btn btn-default btn-sm"> Software development pipeline (11)</a>
                                </li>
                                <li>
                                    <a role="button" href="/tags/Paragliding" class="btn btn-default btn-sm"> Paragliding (9)</a>
                                </li>
                                <li>
                                    <a role="button" href="/tags/PG2" class="btn btn-default btn-sm"> PG2 (9)</a>
                                </li>
                                <li>
                                    <a role="button" href="/tags/Blog" class="btn btn-default btn-sm"> Blog (7)</a>
                                </li>
                                <li>
                                    <a role="button" href="/tags/Nuclei" class="btn btn-default btn-sm"> Nuclei (6)</a>
                                </li>
                                <li>
                                    <a role="button" href="/tags/Pipeline-design" class="btn btn-default btn-sm"> Pipeline design (6)</a>
                                </li>
                        </ul>
                    </div>
                    <br />
                    <ul class="pager">
                        <li class="next">
                            <a href="/tags">View All Tags &rarr;</a>
                        </li>
                    </ul>
                </div>
            </div>

            <div id="content">

        <div id="post-spacer">
            <div id="post">
                <div id="post-header">
                    <!--
    Model is: Tuple<IDocument, IDocument>.
    The first one is the current document that is being rendered, the second one is the one for which the post header should be rendered.
-->


<h2>
            <a href="/posts/Robotics-learning-ros">Starting robotics - Learning Robot Operating System (ROS)</a>
</h2>
<div id="post-meta">
    <div class="meta-date">
Tuesday, May 3, 2022
 |             Posted in     </div>
    <div class="meta-tags">
                        <a id="post-category" role="button" href="/tags/Robotics" class="btn btn-default btn-xs tag-no-wrap">Robotics</a>
                        <a id="post-category" role="button" href="/tags/ROS" class="btn btn-default btn-xs tag-no-wrap">ROS</a>
                        <a id="post-category" role="button" href="/tags/ROS-Noetic" class="btn btn-default btn-xs tag-no-wrap">ROS&nbsp;Noetic</a>
    </div>
</div>

                </div>
                <div id="post-content">
                    <p>As part of my <a href="tags/Robotics">journey into robotics</a> I have been working on updating my
<a href="https://www.scuttlerobot.org/">SCUTTLE robot</a> to use the
<a href="http://wiki.ros.org/">Robot Operating System (ROS)</a>. ROS provides a number of different things
that make robot development much easier. The main items are a middleware layer for communication
between different parts of the robot, hardware abstractions for different sensors, motors and
controllers, device drivers and many other libraries and packages.</p>
<p>The main benefit of using ROS is that it provides a lot of integrations and functionality that you
can quickly use. On the other hand the drawback that comes with all of this is that the learning curve
for ROS is very steep. The documentation is pretty good and so are the tutorials, however there are
a lot of different parts in ROS, which makes for a lot of interesting ways to get confused. So to
speed up my progress with ROS I decided to do the <a href="https://www.udemy.com/course/ros-essentials/">ROS for beginners I</a>
and <a href="https://www.udemy.com/course/ros-navigation/">II courses</a> on Udemy. These courses were very helpful
to reduce the learning curve for ROS and quickly get me familiar with ROS.</p>
<figure style="float:left">
<img alt="Scuttle in Gazebo" src="/assets/images/robotics/scuttle/scuttle-in-gazebo.jpg" />
<figcaption>SCUTTLE robot in Gazebo</figcaption>
</figure>
<p>This post won't explain how ROS works, there are
<a href="https://www.google.com/search?q=getting+started+with+ros&amp;rlz=1C1CHBF_enNZ825NZ825&amp;oq=getting+started+with+ros&amp;aqs=chrome..69i57j69i61.2633j0j7&amp;sourceid=chrome&amp;ie=UTF-8">many, many, many tutorials out on the web</a>
that will do a far better job than I can. However I do want to share some of the things I learned
from working with ROS.</p>
<p>The first thing to note is the operating system on which you want to run ROS. ROS is developed
to be run on Ubuntu. My home PC runs on the Windows Operating System. ROS 1 wasn't designed to run
directly on Windows (ROS2 will be able to) but there are several ways to run it. First you can run
ROS Noetic straight on Windows using <a href="https://robostack.github.io/">Robostack</a>. This uses the Conda
package manager and provides packages for all operating systems. I found that this works moderately
well, there are a number of packages missing and occasionally things error out. This approach works
well for simple learning exercises but may yet not be suitable for large ROS applications.</p>
<p>A second approach is to <a href="https://ishkapoor.medium.com/how-to-install-ros-noetic-on-wsl2-9bbe6c00b89a">run ROS on WSL2</a>.
This is able to run the Ubuntu native packages so you can run all parts of ROS and with the help of
an XServer like <a href="https://sourceforge.net/projects/vcxsrv/">VcXsrv</a> you can even run all the graphical
tools. One thing to keep in mind if you use WSL is that networking may cause problems if you run
ROS distributed over more than one computing device, e.g. a laptop and a physical robot. With WSL
there is no easy way to expose WSL applications to uninitiated network connections, i.e.
a request started from inside WSL works, but a request started from outside WSL won't be able to
connect. This is important because ROS nodes need to be able to communicate with each other freely.
The result will be that the nodes on the WSL side will seem to be connected and functional while the
other nodes won't be able to send messages to the WSL nodes.</p>
<p>The final approach to running ROS is to create an <a href="https://gist.github.com/pvandervelde/2282dafc080945ecb7981edb740ed47c">Ubuntu VM</a>
or physical machine. In this case as long as the machine is reachable over the network for other
compute devices, it is possible to run ROS distributed over the network. This is the way I currently
run ROS.</p>
<figure style="float:right">
<img alt="Scuttle in RViz" src="/assets/images/robotics/scuttle/scuttle-in-rviz-no-sensors.jpg" />
<figcaption>SCUTTLE robot in RViz</figcaption>
</figure>
<p>Once you have a working ROS installation the next thing you'll find out is that ROS configurations
can be difficult to get right, especially when you're working with a physical robot where visibility
of what is going on may not be the best. There are a number of useful tools available to provide
insights into what is going on with your robot.</p>
<p>The first tool is <a href="https://gazebosim.org/">Gazebo</a> which provides a simulated environment for
ROS robots. The simulation is based on a physics engine with good accuracy of real world physics. It
also provides models for sensors, like LIDAR and cameras, and sensor noise to simulate real-world
sensor behaviour. Having a simulated environment allows you to repeat behaviours many times in
the same way in rapid succession. Having a way to easily repeat behaviours and control the environment
means that you can quickly test and debug specific behaviours, something which can be much more difficult
with a physical robot.</p>
<p>The second tool, <a href="http://wiki.ros.org/rviz">RViz</a>, provides visualization of the environment of the
robot and how the robot perceives that environment. It allows you to visualize what the robot can
&lsquo;see&rsquo;. RViz works by subscribing to the different message topics that are available. This means
it works both for simulated robots (using Gazebo) and physical robots.</p>
<p>The final tool worth discussing is <a href="https://foxglove.dev/">Foxglove studio</a> which also provides
insight into the data that the robot generates, both from sensors but also in the form of messages
sent between the different components of the robot. One of the nice features of Foxglove is that
you can make plots with values provided by messages. For instance you can plot the velocity
components of a <a href="http://docs.ros.org/en/lunar/api/geometry_msgs/html/msg/Twist.html">Twist message</a>.
This is useful to compare requested velocities compared to actual achieved velocities.
Another great feature of Foxglove is that it is able to display the <a href="http://wiki.ros.org/rosout">ROS logs</a>
and it also allows you to filter and search these logs. Given that ROS logs can quickly become
large the ability to filter is very useful.</p>
<figure style="float:left">
<img alt="Scuttle in RViz with LIDAR overlay" src="/assets/images/robotics/scuttle/scuttle-in-rviz-slam-enabled.jpg" />
<figcaption>SCUTTLE robot in RViz with LIDAR overlay</figcaption>
</figure>
<p>When working with a mobile robot, like I am, getting the robot to navigate a space is often one of
the first achievable goals. The <a href="http://wiki.ros.org/navigation">navigation stack</a> in ROS provides
a lot of the basic capabilities to get started with robot navigation in a reasonable time span. Do
note however that the navigation stack in ROS is fairly large and has a lot of different configuration
options so it is wise to set some time aside for learning about the different options. I'll talk about
navigating with SCUTTLE in a future post.</p>
<p>As mentioned I started learning ROS1 with Udemy. My goal for learning ROS was to use it for
navigation with my SCUTTLE  robot, more on that in a future post. Once I manage to get navigation
working for SCUTTLE I plan to start adding different sensors. Finally I want to enable task planning
for SCUTTLE, e.g. tasks like &ldquo;drive to the living room and collect my coffee cup and bring it back
to me&rdquo;.</p>
<p>Another part of my plans is to upgrade to using <a href="https://docs.ros.org/en/galactic/index.html">ROS2</a>.
ROS1 end-of-life is 2025, which is only 3 years away, and additionally ROS2 has a more modern stack
with python 3, better communication security, an improved navigation stack and more active development.
More on this will follow in a future post once I have upgraded my robot to ROS2</p>

                </div>
            </div>
        </div>
        <div id="post-spacer">
            <div id="post">
                <div id="post-header">
                    <!--
    Model is: Tuple<IDocument, IDocument>.
    The first one is the current document that is being rendered, the second one is the one for which the post header should be rendered.
-->


<h2>
            <a href="/posts/Starting-robotics-with-scuttle">Starting robotics with the SCUTTLE robot</a>
</h2>
<div id="post-meta">
    <div class="meta-date">
Friday, March 18, 2022
 |             Posted in     </div>
    <div class="meta-tags">
                        <a id="post-category" role="button" href="/tags/Robotics" class="btn btn-default btn-xs tag-no-wrap">Robotics</a>
                        <a id="post-category" role="button" href="/tags/Scuttle" class="btn btn-default btn-xs tag-no-wrap">Scuttle</a>
    </div>
</div>

                </div>
                <div id="post-content">
                    <p>As mentioned in my last post I have started tinkering with mobile robots. My current goal is to
build an outdoor capable <a href="https://en.wikipedia.org/wiki/Autonomous_robot">autonomous mobile robot</a>.
The first problem I have to solve in order to move towards my goal is that I know a decent amount
about software, a reasonable amount about structures and mechanics and very little about electronics.
Oh and I know nothing about the robotics algorithms like how navigation works, the fact that robots
may have a hard time
<a href="https://en.wikipedia.org/wiki/Simultaneous_localization_and_mapping">figuring out where they are</a>
and that decision making is hard for robots.</p>
<p>So in order to not have to learn all the things at the same time I decided it would be sensible to
start off buying a kit that I could assemble and learn to work with. The basic requirements were</p>
<ul>
<li>Something that didn't require me to solder electronics or 3d print parts, because I have neither
of those tools, yet ...</li>
<li>Capable of actually carrying a load of some sort. Most robot kits are fun platforms to play with
but other than driving around they're not actually capable of carrying things. I want my robot to
be able to carry things for me.</li>
<li>With accessible hardware and software so that I could modify and extend it.</li>
<li>Affordable, because money is still finite</li>
</ul>
<figure style="float:right">
<img alt="Scuttle assembled" src="/assets/images/robotics/scuttle/scuttle-assembled.jpg" />
<figcaption>SCUTTLE robot assembled</figcaption>
</figure>
<p>After a little bit of searching I decided to buy the <a href="https://scuttlerobot.org/">SCUTTLE robot</a> kit.
The SCUTTLE kit is an <a href="https://github.com/scuttlerobot">open source kit</a> for which all the build
information is available online, from the <a href="https://grabcad.com/library/scuttle-robot-v2-3-1">3D drawings</a>
to the material BOM. Additionally there is a lot of sample code that makes it easy to get going with
the robot. There are code samples that allow you to drive the robot with a gamepad or by putting it in
follow mode where it follows a coloured object. Note that when you pick a coloured object apparently
orange is the best colour because of the colour difference with the surroundings. In my case initially
I picked a dark red object in a poorly lit environment with lots of other variations of red around.
You can probably imagine how well that went ...&hellip; [*]</p>
<p>Assembly of the SCUTTLE robot is pretty easy, it consists of aluminium T-slot lengths, some 3D
printed parts and some electronics parts. The T-slot lengths are fastened with angle brackets and
the 3D printed parts bolt to the T-slot lengths. The kit I bought only required connecting electronic parts
with connectors, no soldering required. If you build a SCUTTLE from scratch there is some soldering to
be done.</p>
<p>Once you have assembled your SCUTTLE you can test the functionality by using the code samples to
verify the encoders and the motors. Note that it is wise to review your cabling before turning anything
on because it is possible to connect some of the electronics incorrectly. I ended up breaking my
Raspberry Pi, quite possibly by connecting the encoders backwards or something similar.</p>
<figure style="float:left">
<img alt="Scuttle in RViz" src="/assets/images/robotics/scuttle/scuttle-rviz.png" />
<figcaption>SCUTTLE in RViz</figcaption>
</figure>
<p>After verifying that the motors rotate in the correct direction you can try controlling the
robot via the gamepad and drive it around the house.</p>
<p>Currently I'm working to update my SCUTTLE with the <a href="https://www.ros.org/">ROS</a> software. Currently
I'm testing with ROS noetic but I am looking to eventually switch to using ROS2 as it seems to have
a more flexible navigation stack. More on that in a future post.</p>
<p>I'm also planning to add some sensors to my SCUTTLE to make it a bit more autonomous. The first
plan is to add a bumper that will tell the robot if it has hit something. I have picked up some
contact switches but am still thinking about the design for the bumper. Later on I want to add
sonar, <a href="https://en.wikipedia.org/wiki/Time-of-flight_camera">Time of Flight (ToF) sensors</a> and
potentially cameras as well.</p>
<p>[*] SCUTTLE drove straight at the red coloured couch instead of following the red object I wanted
it to follow</p>

                </div>
            </div>
        </div>
        <div id="post-spacer">
            <div id="post">
                <div id="post-header">
                    <!--
    Model is: Tuple<IDocument, IDocument>.
    The first one is the current document that is being rendered, the second one is the one for which the post header should be rendered.
-->


<h2>
            <a href="/posts/Building-autonomous-mobile-robot-why">Building an autonomous mobile robot - But why?</a>
</h2>
<div id="post-meta">
    <div class="meta-date">
Monday, March 7, 2022
 |             Posted in     </div>
    <div class="meta-tags">
                        <a id="post-category" role="button" href="/tags/Robotics" class="btn btn-default btn-xs tag-no-wrap">Robotics</a>
    </div>
</div>

                </div>
                <div id="post-content">
                    <p>Over the last decade I have been developing software of all kinds. I have coded both for work and
for my own learning and entertainment. The majority of the coding I did over that period was code
that lived only in the virtual world. Things from from numerical simulations to building software
infrastructure.</p>
<p>While I have always greatly enjoyed writing code and learning new skills I have found myself being
less and less interested in writing more code that only lives in a virtual world. It feels like
there is no purpose for this code, like something is missing.</p>
<p>The main thing I feel is missing is interaction with the physical world. The ability to see the
effects of the code when it is executed, to see things move and react to the world. While in
university I studied <a href="https://www.tudelft.nl/en/ae">Aerospace engineering</a> and
<a href="https://www.auckland.ac.nz/en/engineering.html">Mechanical engineering</a>. Two disciplines heavily
involved with real world physics. The fact that a design lives in the physical world adds all kinds
of additional constraints and behaviours. Some of which the result of interesting physical
behaviour and others the result of the continuous and analogue nature of the physical world.
All of this makes the engineering problems more interesting and challenging.</p>
<p>One of the ways I have been incorporating making physical things is by working with timber. I've
build several bits of furniture and generally greatly enjoy working with wood. However working with
wood misses the technological side that I do also enjoy.</p>
<p>A domain that combines both the physical and virtual worlds with large amounts of technology that
recently caught my eye is the world of robotics. As robotics is a combination of many different
fields there is a lot to discover and learn about. Even for the design of a simple robot you will
have to deal with fields like structural mechanics, electronics, software, perception, machine
intelligence etc.. As a bonus thanks to the availability of relatively cheap electronics and
structural components it is possible to build an interesting robot yourself.</p>
<p>My current goal is to build an <a href="https://en.wikipedia.org/wiki/Autonomous_robot">autonomous mobile robot</a>
that is capable of navigating outdoor spaces while carrying some kind of cargo from
one location to another. Before I get to designing and building a robot from the ground
up there are a lot of things to learn. In order to speed up the learning process I
picked up a <a href="https://scuttlerobot.org/">SCUTTLE</a> robot kit and started learning about
<a href="https://www.ros.org/">ROS</a>. More on that will follow in a future post.</p>

                </div>
            </div>
        </div>
        <div id="post-spacer">
            <div id="post">
                <div id="post-header">
                    <!--
    Model is: Tuple<IDocument, IDocument>.
    The first one is the current document that is being rendered, the second one is the one for which the post header should be rendered.
-->


<h2>
            <a href="/posts/Software-development-pipeline-security">Software development pipeline - Security</a>
</h2>
<div id="post-meta">
    <div class="meta-date">
Sunday, November 8, 2020
 |             Posted in     </div>
    <div class="meta-tags">
                        <a id="post-category" role="button" href="/tags/Build-configuration-as-code" class="btn btn-default btn-xs tag-no-wrap">Build&nbsp;configuration&nbsp;as&nbsp;code</a>
                        <a id="post-category" role="button" href="/tags/Delivering-software" class="btn btn-default btn-xs tag-no-wrap">Delivering&nbsp;software</a>
                        <a id="post-category" role="button" href="/tags/DevOps" class="btn btn-default btn-xs tag-no-wrap">DevOps</a>
                        <a id="post-category" role="button" href="/tags/Security" class="btn btn-default btn-xs tag-no-wrap">Security</a>
                        <a id="post-category" role="button" href="/tags/Software-development-pipeline" class="btn btn-default btn-xs tag-no-wrap">Software&nbsp;development&nbsp;pipeline</a>
    </div>
</div>

                </div>
                <div id="post-content">
                    <p>One of the final chapters in the description of the development pipeline deals with security. In
this case I specifically mean the security of the pipeline and the underlying infrastructure,
not the security of the applications which are created using the pipeline.</p>
<p>The first question is why should you care about the security of the pipeline? After all
developers use the development pipelines via secured networks and their access permissions will be
set at the source control level. Additionally high trust levels exist between the pipeline
processes, the infrastructure and the source repository. In general this leads to the
security of the pipeline being placed lower on the priority list.</p>
<p>Which issues could you run into if you deem the security of the pipeline less critical? One
argument comes from
<a href="https://www.researchgate.net/publication/332834111_Vulnerabilities_in_Continuous_Delivery_Pipelines_A_Case_Study">pen tests</a>
which show that CI/CD systems are a great way into
<a href="https://www.blackhat.com/docs/eu-15/materials/eu-15-Mittal-Continuous-Intrusion-Why-CI-Tools-Are-An-Attackers-Best-Friend.pdf">corporate networks</a>.
Additionally there have been a number of attacks aimed at
<a href="https://medium.com/&#64;hkparker/analysis-of-a-supply-chain-attack-2bd8fa8286ac">distributing</a> malicious
code through trusted software packages. These so called
<a href="https://en.wikipedia.org/wiki/Supply_chain_attack">supply chain attacks</a> try to compromise the user
by inserting malicious code in third-party dependencies, i.e. the source code supply chain.</p>
<p>In essence the problem comes down to the fact that the build pipeline and its associated infrastructure
have access to many different systems and resources which are normally not easily accessible for
its users. This makes your pipeline a target for malicious actors who could abuse some of the
following states for their own purposes.</p>
<ul>
<li>The development pipeline runs all tasks with the same user account on the executors and thereby
the same permissions. Obviously the worst case scenario would be running as an administrator.</li>
<li>Multiple pipeline invocations executed on a single machine, either in parallel or sequential,
which allows a task in a pipeline to access the workspace of another pipeline. This ability can
for instance be used to by-pass access controls on source code.</li>
<li>Downloading packages directly from external package repositories, e.g. NPM or Docker.</li>
<li>Direct access to the internet, which allows downloading of malicious code and uploading of artefacts
to undesired locations.</li>
<li>The development pipeline has the ability to update or overwrite existing artefacts.</li>
<li>The executors have direct access to different resources that normal pipeline users don't have
access to. Specifically if the same infrastructure is used to build artefacts and
to deploy them to the production environment.</li>
</ul>
<p>One of the problems with securing the development pipeline is that all the actions mentioned above
are in one way or another required for the pipeline to function, after all the pipeline needs to be
able to build and distribute artefacts. The follow up question then becomes can you distinguish between
normal use and malicious use?</p>
<p>It turns out that distinguishing that this will be difficult because both forms of actions are
essentially the same, they both use the development pipeline for its intended purpose. So then in
order to prevent malicious use put up as many barriers to malicious use as possible, aka
<a href="https://en.wikipedia.org/wiki/Defense_in_depth_(computing)">defence in depth</a>. The following are a
number of possible ways to add barriers:</p>
<ul>
<li>Grant the minimal possible permissions for the executors, both on the executor and from the executor
to the external resources. It is better to run the pipeline actions as a local user on the executor,
rather than using a domain user. Grant permissions to a specific resource to the action that
interacts with the resource.</li>
<li>Execute a single pipeline per executor and never reuse the executor.</li>
<li>Limit network connections to and from executors. In general executors do not need internet access,
save for a few pre-approved sites, .e.g. an artefact storage. There is also very little reason
for executors to connect to each other, especially if executors are short lived.</li>
<li>Pull packages, e.g. NPM or Docker, only from an internal feed. Additions to the internal feed are made
after the specific package has been reviewed.</li>
<li>The artefacts created with the pipeline should be tracked so that you know the origin, creation time,
storage locations and other data that can help identity an exact instance of an artefact. Under
ideal circumstances you would know exactly which sources and packages were used to create
the artefact as well.</li>
<li>Artefacts should be immutable and never be allowed to overwritten.</li>
<li>Do not use the executors that perform builds for deployments, use a set of executors that only
have deployment permissions but no permissions to source control etc..</li>
</ul>
<p>Beyond these changes there are many other ways to reduce the attack surface as documented in the
security literature. In the end the goal of this post is more to point out that the security of the
development pipeline is important, rather than providing ways to make a pipeline more secure. The
exact solutions for pipeline security depend very heavily on the way the pipeline is constructed and
what other forms of security validation have been placed around the pipeline.</p>

                </div>
            </div>
        </div>
        <div id="post-spacer">
            <div id="post">
                <div id="post-header">
                    <!--
    Model is: Tuple<IDocument, IDocument>.
    The first one is the current document that is being rendered, the second one is the one for which the post header should be rendered.
-->


<h2>
            <a href="/posts/Software-development-pipeline-infrastructure-dependency-reduction">Software development pipeline - Infrastructure dependency reduction</a>
</h2>
<div id="post-meta">
    <div class="meta-date">
Sunday, November 1, 2020
 |             Posted in     </div>
    <div class="meta-tags">
                        <a id="post-category" role="button" href="/tags/Build-configuration-as-code" class="btn btn-default btn-xs tag-no-wrap">Build&nbsp;configuration&nbsp;as&nbsp;code</a>
                        <a id="post-category" role="button" href="/tags/Delivering-software" class="btn btn-default btn-xs tag-no-wrap">Delivering&nbsp;software</a>
                        <a id="post-category" role="button" href="/tags/DevOps" class="btn btn-default btn-xs tag-no-wrap">DevOps</a>
                        <a id="post-category" role="button" href="/tags/Software-development-pipeline" class="btn btn-default btn-xs tag-no-wrap">Software&nbsp;development&nbsp;pipeline</a>
    </div>
</div>

                </div>
                <div id="post-content">
                    <p>The <a href="/posts/Software-development-pipeline-considerations-for-infrastructure-improvements.html">last post</a>
I explained a few ways to improve the development pipeline infrastructure while
keeping downtime minimal. One important consideration for the
<a href="/posts/Software-development-pipeline-Design-resilience.html">resilience</a> of the
pipeline is to reduce the dependencies between the pipeline and the infrastructure.</p>
<p>So what does unwanted coupling between the pipeline and the
infrastructure mean? After all the pipeline code makes assumptions about the capabilities
of the infrastructure it runs on, just like every other piece of code.
For development pipelines examples of unwanted dependencies are:</p>
<ul>
<li>The pipeline is created by using tasks specific to a CI/CD system which means that the artefacts
can only be created on the infrastructure</li>
<li>Pipeline stages expect the outputs from previous stages to be available on the executor,
or worse, they expect the outputs from other pipelines to be on the executor</li>
<li>A pipeline task assumes that certain tools have been installed on the executors</li>
<li>A pipeline task assumes that it has specific permissions on an executor</li>
</ul>
<p>The first two items mentioned impacts the velocity at which development can take place. By relying
completely on the CI/CD system for artefact creation cycle times increases. Additionally
making changes to the pipeline often requires executing it multiple times to debug it.</p>
<p>The second set of items are related to the ease of switching tooling, e.g. when changing vendors
or during disaster recovery. These may or may not be of concern depending on the direction of
development and technology. In my experience vendor lock-in is something to keep in mind if for no
other reason then that switching vendors can be prohibitively complicated if pipeline processes are
too tightly coupled to the CI/CD system.</p>
<p>If any of the issues mentioned are concerning to you then partially or completely decoupling
the development pipeline from the infrastructure will be a worthwhile exercise. This
can be achieved with some of the following steps.</p>
<h4>Versions for everybody</h4>
<p>Ensure that all code, tools, scripts and resources used in the pipeline are versioned. That way you
know exactly what is required for a specific pipeline execution. Which make executions repeatable
in the future when newer versions of tools and resources have been released.</p>
<h4>Only the workspace is yours</h4>
<p>Pipeline actions should work only in their own workspace. Any code, scripts or tools they require
are put in the workspace. This reduces scattering of data during the execution of a pipeline and
reduces pollution of the executors.</p>
<h4>Lean executors</h4>
<p>Make your pipeline actions assume they will run on a bare minimum runtime. This will
ensure that your pipelines will obtain their preferred version of tools they need and
install them in their own workspace. The benefit of doing this that a pipeline can be executed on
any available executor, either in your CI/CD system or on a developer machine, as it will not be
making any assumptions about the capabilities of an executor.</p>
<h4>Single use executors are cleaner</h4>
<p>Configure the CI/CD system to use a clean executor for every job. This will ensure that changes made
during a previous job don't interfere with the current job. Additionally it will enforce the use of
immutable infrastructure for the executors, thus allowing versioning of the executors.</p>
<h4>Use the CI/CD system as a task executor</h4>
<p>Keep the configuration for the jobs in the CI/CD system to a minimum. Ideally the entire configuration
is the execution of a script or tools with a simple set of arguments. By reducing the job of the
CI/CD system to executing a script or tool it is simple to execute the pipeline actions somewhere
else, e.g. on a developer machine or a different CI/CD system.</p>
<h4>Treat pipeline services as critical</h4>
<p>All services used by the pipeline should be treated as mission critical systems. After all a failure
in one of these systems can stop all your pipelines from executing. So reduce the number of services
you use in your pipeline and improve the resilience the services you have to rely on using the standard
approaches.</p>

                </div>
            </div>
        </div>
            </div>
        </div>

        <footer>
            <div id="footer" class="container">
    <div id="fbox1">
        <h2>Related</h2>
        <ul>
            <li><a href="https://github.com/pvandervelde"><i class="fa fa-github"></i> GitHub</a></li>
            <li><a href="https://www.linkedin.com/profile/view?id=33950311"><i class="fa fa-linkedin"></i> LinkedIn</a></li>
            <li><a href="https://stackoverflow.com/users/539846/petrik"><i class="fa fa-stack-overflow"></i> StackOverflow</a></li>
            <li><a href="https://careers.stackoverflow.com/pvandervelde"><i class="fa fa-stack-overflow"></i> StackOverflow Careers</a></li>
            <li><a href="https://profile.codersrank.io/user/pvandervelde">CodersRank</a></li>
        </ul>
    </div>
    <div id="fbox2">
        <h2 id="copyright">Copyright</h2>
        <p>Copyright (c) 2022 <a href="/">Petrik van der Velde</a>. All rights reserved.</p>

        <h2 id="disclaimer">Disclaimer</h2>
        <p>The opinions expressed herein are my own personal opinions and do not represent my employer's view in any way.</p>
    </div>
    <div id="fbox3">
        <h2 id="media">Media</h2>
        <p><a href="/feed.atom"><img src="/assets/images/feed.png" alt="Atom feed"></a></p>
    </div>
</div>
<div id="copyright" class="container">
    <div>
        <p>
            Generated by <a href="https://wyam.io">Wyam</a> on Sat, 07 May 2022 02:10:47 GMT

 from commit <a href="https://github.com/pvandervelde/mindvortex/tree/33e23d60c7d149ff42b0e0a643ca8311d17013a9">33e23d60c7d149ff42b0e0a643ca8311d17013a9</a> at version 3.6.0.        </p>
    </div>

    <p>
        Site design based on the <a href="https://www.freecsstemplates.org/previews/opentools/">Open Tools</a> design
        by <a href="https://www.freecsstemplates.org">FreeCSSTemplates.org</a>.
    </p>
    <p>
        Feed icon by <a href="https://www.icojam.com/">Icojam</a> and Favicon by
        <a href="https://www.flaticon.com/free-icon/twister-sky-wind_12318" title="Yannick">Yannick</a>
        from <a href="https://www.flaticon.com" title="Flaticon">www.flaticon.com</a>
    </p>
</div>

        </footer>
    </body>
</html>
