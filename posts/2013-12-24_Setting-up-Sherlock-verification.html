<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head> 
    <!-- Standard Meta -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width" />

    <!-- Site Properities -->
    <title>Sherlock configuration - Verification | Mind Vortex</title>
    <meta name="description" content="The place where I ramble on about software development, fluid dynamics, flying and climbing." />
    <meta name="keywords" content="Patrick van der Velde, Petrik, Nuclei, Sherlock, nAnicitus, nAdoni, nTreva, rock climbing, paragliding" />
    <meta name="author" content="Petrik van der Velde" />

    <!-- DocPad Meta -->
    <meta name="generator" content="DocPad v6.65.0" />

    <!-- DocPad Styles + Our Own -->
    <style >html.wait {
	cursor: wait !important;
	opacity: 0;
	transition: opacity 0.5s ease;
}</style><link  rel="stylesheet" href="/vendor/normalize.css" /><link  rel="stylesheet" href="/vendor/h5bp.css" /><link  rel="stylesheet" href="/styles/style.css" /><link  rel="stylesheet" href="/styles/github.css" />

    <!-- Icons -->
    <!-- Favicon -->
    <link rel="shortcut icon" href="/icons/twister.ico" />
    
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
</head>
<body>
    <!--[if lt IE 7]>
        <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
    <![endif]-->
    
    <div id="header" class="container">
        <div id="logo">
            <h1><a href="/">Mind Vortex</a></h1>
        </div>
        <div id="menu">
            <ul>
                
                    <li class="inactive">
                        
                            <a href="/index.html">Home</a>
                        
                    </li>
                
                    <li class="inactive">
                        
                            <a href="/projects.html">Projects</a>
                        
                    </li>
                
                    <li class="inactive">
                        
                            <a href="/archives.html">Archives</a>
                        
                    </li>
                
                    <li class="inactive">
                        
                            <a href="/about.html">About</a>
                        
                    </li>
                
            </ul>
        </div>
    </div>
    <div id="page" class="container">
        <div id="sidebar">
            <div id="sbox1">
                <h2 id="patrick-van-der-velde">Patrick van der Velde</h2>
<p><img src="http://www.gravatar.com/avatar/9bc8b3ff385cd14f2b12138c97729df2?s=160" alt="Gravatar for Patrick van der Velde"> </p>
<p>Dutch software developer, living, working and playing in New Zealand. 
Rock climber, and future paragliding pilot. Developer of <a href="http://pvandervelde.github.io/Sherlock">Sherlock</a>, 
<a href="http://pvandervelde.github.io/Nuclei">Nuclei</a> and other projects</p>
<p><a href="/about.html">More ...</a></p>

            </div>
            <div id="sbox2">
                <h2>Recent</h2>
                <ul>
                    
                        <li><a href="/posts/2014-09-27_Building-and-delivering-nBuildKit-with-AppVeyor.html">Building and delivering nBuildKit with AppVeyor</a></li>
                    
                        <li><a href="/posts/2014-08-19_nBuildKit-release-V032.html">nBuildKit release - V0.3.2</a></li>
                    
                        <li><a href="/posts/2014-07-26_Adding-pagination-with-DocPad.html">Adding pagination with DocPad</a></li>
                    
                        <li><a href="/posts/2014-07-24_Blog-archives-by-DocPad.html">Blog archives by DocPad</a></li>
                    
                        <li><a href="/posts/2014-07-21_nBuildKit-release-V024.html">nBuildKit release - V0.2.4</a></li>
                    
                        <li><a href="/posts/2014-06-16_nBuildKit-release-V015.html">nBuildKit release - V0.1.5</a></li>
                    
                        <li><a href="/projects/nbuildkit.html">nBuildKit</a></li>
                    
                        <li><a href="/posts/2014-05-28_Nuclei-release-V080.html">Nuclei release - V0.8.0</a></li>
                    
                        <li><a href="/posts/2014-05-23_Improvements-to-the-site.html">Improvements to the site</a></li>
                    
                        <li><a href="/projects/nrefs.html">nRefs</a></li>
                    
                </ul>
            </div>
            <div id="sbox3">
                <h2>Tags</h2>
                
                    <a href="/tags/apollo.html" style="font-size: 113.13247675185968%">
                        Apollo
                    </a>
                
                    <a href="/tags/appveyor.html" style="font-size: 100%">
                        AppVeyor
                    </a>
                
                    <a href="/tags/blog.html" style="font-size: 130.49266672559813%">
                        Blog
                    </a>
                
                    <a href="/tags/climbing.html" style="font-size: 100%">
                        Climbing
                    </a>
                
                    <a href="/tags/configuration.html" style="font-size: 100%">
                        Configuration
                    </a>
                
                    <a href="/tags/console.html" style="font-size: 100%">
                        Console
                    </a>
                
                    <a href="/tags/continous-integration.html" style="font-size: 113.13247675185968%">
                        Continous integration
                    </a>
                
                    <a href="/tags/docpad.html" style="font-size: 120.81448319328996%">
                        DocPad
                    </a>
                
                    <a href="/tags/github.html" style="font-size: 100%">
                        GitHub
                    </a>
                
                    <a href="/tags/gitversion.html" style="font-size: 100%">
                        GitVersion
                    </a>
                
                    <a href="/tags/jenkins.html" style="font-size: 120.81448319328996%">
                        Jenkins
                    </a>
                
                    <a href="/tags/job-template.html" style="font-size: 100%">
                        Job template
                    </a>
                
                    <a href="/tags/msbuild.html" style="font-size: 100%">
                        MsBuild
                    </a>
                
                    <a href="/tags/nuclei.html" style="font-size: 150%">
                        Nuclei
                    </a>
                
                    <a href="/tags/pdb.html" style="font-size: 113.13247675185968%">
                        PDB
                    </a>
                
                    <a href="/tags/pg2.html" style="font-size: 141.62896638657992%">
                        PG2
                    </a>
                
                    <a href="/tags/paragliding.html" style="font-size: 136.86752324814032%">
                        Paragliding
                    </a>
                
                    <a href="/tags/regression-test.html" style="font-size: 100%">
                        Regression test
                    </a>
                
                    <a href="/tags/regression-testing.html" style="font-size: 113.13247675185968%">
                        Regression testing
                    </a>
                
                    <a href="/tags/srcsrv.html" style="font-size: 100%">
                        SRCSRV
                    </a>
                
                    <a href="/tags/scripting.html" style="font-size: 100%">
                        Scripting
                    </a>
                
                    <a href="/tags/sherlock.html" style="font-size: 148.59593857014607%">
                        Sherlock
                    </a>
                
                    <a href="/tags/software-delivery.html" style="font-size: 100%">
                        Software delivery
                    </a>
                
                    <a href="/tags/source-server.html" style="font-size: 100%">
                        Source server
                    </a>
                
                    <a href="/tags/symstore.html" style="font-size: 100%">
                        SymStore
                    </a>
                
                    <a href="/tags/symbol-server.html" style="font-size: 100%">
                        Symbol server
                    </a>
                
                    <a href="/tags/symbol-stream.html" style="font-size: 100%">
                        Symbol stream
                    </a>
                
                    <a href="/tags/teamcity.html" style="font-size: 100%">
                        TeamCity
                    </a>
                
                    <a href="/tags/teststack-white.html" style="font-size: 100%">
                        TestStack.White
                    </a>
                
                    <a href="/tags/ui-test.html" style="font-size: 100%">
                        UI test
                    </a>
                
                    <a href="/tags/unc.html" style="font-size: 100%">
                        UNC
                    </a>
                
                    <a href="/tags/wcf.html" style="font-size: 126.26495350371935%">
                        WCF
                    </a>
                
                    <a href="/tags/waipapa.html" style="font-size: 100%">
                        Waipapa
                    </a>
                
                    <a href="/tags/writing.html" style="font-size: 100%">
                        Writing
                    </a>
                
                    <a href="/tags/nadoni.html" style="font-size: 113.13247675185968%">
                        nAdoni
                    </a>
                
                    <a href="/tags/nanicitus.html" style="font-size: 130.49266672559813%">
                        nAnicitus
                    </a>
                
                    <a href="/tags/nbuildkit.html" style="font-size: 126.26495350371935%">
                        nBuildKit
                    </a>
                
                    <a href="/tags/nrefs.html" style="font-size: 100%">
                        nRefs
                    </a>
                
            </div>
        </div>
        <div id="content">
            <!--
    Commenting is based on: http://ivanzuzak.info/2011/02/18/github-hosted-comments-for-github-hosted-blogs.html
-->
<div id="post">
    <div id="post">
    <div id="post-header">
        <h2>
            
                Sherlock configuration - Verification
            
        </h2>
        <div id="post-meta">
            <p>
                Tuesday, December 24, 2013 | Posted in
                
                    <a id="post-category" href="/tags/sherlock.html">Sherlock</a>
                
            </p>
        </div>
    </div>
    <div id="post-content">
        <p>After the configuration of the <a href="/posts/2013-12-10_Setting-up-Sherlock-serverside.html">host machine</a> and the <a href="/posts/2013-12-11_Setting-up-Sherlock-virtualmachines.html">virtual machines</a> the final step in the configuration of Sherlock is to verify that everything is configured correctly. This can be done by using the verification package that comes with each <a href="https://github.com/pvandervelde/Sherlock/releases">release</a> of Sherlock. In order to use the verification package take the following steps:</p>
<ul>
<li>Unpack the <strong>verification.zip</strong> package to a directory somewhere (e.g. <code>c:\temp\sherlock</code>).</li>
<li>Update the configuration file <code>Sherlock.VerificationConfiguration.msbuild</code> with the following settings:<ul>
<li><strong>ConfigurationReportDirectory:</strong> The directory where you want the final report to be placed. Note that both the user who requests the test and the user which is used to run the Sherlock services need to have access to this directory. The <code>report</code> directory that was created on the <a href="/posts/2013-12-10_Setting-up-Sherlock-serverside.html">host</a> machine</li>
<li><strong>ConfigurationServerUrl:</strong> The URL of the web service, e.g. <code>http:\\myhostmachine\sherlock.api</code></li>
<li><strong>ConfigurationOperatingSystem:</strong> The operating system name that you want to test with. This needs to match one of the operating systems that has been registered with the management website and which is installed on at least one of your test environments.</li>
<li><strong>ConfigurationOperatingSystemServicePack:</strong> Can be left empty if the operating system has no service pack. If the operating system has a service pack then it needs to match the service pack name of the operating system as registered with the management web site.</li>
<li><strong>ConfigurationOperatingSystemCulture:</strong> The <a href="http://en.wikipedia.org/wiki/IETF_language_tag">culture</a> as defined for the registered operating system.</li>
<li><strong>ConfigurationOperatingSystemPointerSize:</strong> The &#39;bitness&#39; or pointer size for the operating system, either 32 or 64 bits. Should again match the value that was provided when the operating system was registered.</li>
<li><strong>ConfigurationRemotePcWorkingPath:</strong> A path where the test files will be placed on the test environment, e.g. <code>c:\temp</code>.</li>
<li><strong>ConfigurationSherlockConsoleDirectory:</strong> The directory where the console application is installed, this may be a UNC path or a normal directory, e.g. <code>\\MyHostMachine\console</code>.</li>
</ul>
</li>
<li>Execute the <code>Sherlock.ExecuteVerificationTests.msbuild</code> script. This script will prepare the files to be send across (a test application and some test scripts), start the console application, register the test and then wait for the reports to be produced. </li>
</ul>
<p>Note that the reports will come back with some errors. The verification was designed this way on purpose to make it possible to test the error handling. In the end there should be three reports, one for each known test configuration version, i.e. v1.0, v1.1 and v1.2. The reports should show the following errors:</p>
<ul>
<li>The script execution that executes <code>c:\temp\Sherlock.Verification.Console.exe</code> with the <code>-f</code> command line argument. The <code>-f</code> parameter indicates that the process should &#39;fail&#39; and exit with an exit code of 1.</li>
<li>The script execution for <code>c:\temp\Sherlock.Verfication.Console.exe</code> with parameter <code>-c</code>. The <code>-c</code> parameter indicates that the process should exit with an unhandled exception. The exit code for the process should be -532462766.</li>
<li>The application execution <code>c:\temp\Sherlock.Verification.Console.exe</code> with the <code>-f</code> command line argument. </li>
<li>The application execution for <code>c:\temp\Sherlock.Verfication.Console.exe</code> with parameter <code>-c</code>. </li>
</ul>
<h3 id="troubleshooting">Troubleshooting</h3>
<p>If there are any problems during the verification then the first thing to look at are the debug logs which are written by the different applications. The logs are generally found in <code>c:\ProgramData\Sherlock\&lt;APP_NAME&gt;\&lt;VERSION&gt;\logs</code>. Notes:</p>
<ol>
<li>If there is not enough information in the logs then you can change the log level in the application configuration file under the <code>DefaultLogLevel</code> configuration option. The available levels are (from most verbose to least verbose):<ul>
<li>Trace </li>
<li>Debug</li>
<li>Info</li>
<li>Warn</li>
<li>Error</li>
<li>Fatal</li>
<li>None</li>
</ul>
</li>
<li>The applications running in the test environment also log but those logs may be removed if the test environment is a virtual machine. However version 1.2 of the test configuration file has the possibly to copy the logs back to the host machine for inclusion into the test report. For this to work set the <code>includesystemlog</code> attribute of the <code>includeinreport</code> element to <code>true</code>.</li>
</ol>
<p>Some standard problems that may occur are mentioned below.</p>
<h4 id="console-and-web-service">Console and web service</h4>
<ul>
<li>If the console application fails to connect to the web service because it cannot find the web service then verify that the web service can be reached. The two main problems that could be the root cause of this are either the web service is not running or the user which started the console application has no access rights to the web service.</li>
<li>If the console application crashes due to a URL problem (see the log file) then it is most likely that you put a partial URL, e.g. <code>mycoolserver\sherlock.api</code> instead of <code>http://mycoolserver/sherlock.api</code>.</li>
<li>If the console successfully manages to go through nearly all the test registration steps but fails on the transfer of the test files then there is quite likely a problem with the web service permissions to write to the <code>App_Data</code> directory.</li>
<li>If the web service fails on the first call then there is quite likely a problem with the database connection. This is most likley either a problem with the connection string or a problem with the permissions. In case of a permission issue check if the user which is running the web service can access the stored procedures in the database.</li>
</ul>
<h4 id="update-service">Update service</h4>
<ul>
<li>If the update service is unable to verify the update packages then it is not able to access the public key file. Make sure the configuration file points to the public key file and that this file is reachable by the service.</li>
</ul>
<h4 id="master-controller">Master controller</h4>
<ul>
<li>If the master controller fails to connect to the database this could point to either a problem with the connection string or a problem with the permissions. In case of a permissions problem again check that the user running the master controller can access the stored procedures in the database.</li>
<li>If the master controller is unable to start a virtual machine then the <em>SherlockUser</em> may not have <a href="http://blogs.msdn.com/b/virtual_pc_guy/archive/2008/01/17/allowing-non-administrators-to-control-hyper-v.aspx">permissions</a> to start the virtual machines. The log will show this as an error in the environment loading. Probably a security exception.</li>
<li>If the controller is blocked by the firewall, or the firewall on the test environment is blocking, then there will be no communication between the test environment and the host. The log shows this through the fact that the host will wait an excessive amount of time for the remote &#39;endpoint&#39; to connect. A normal start up takes around 2 minutes for a test environment start, operating system load and Sherlock load.</li>
</ul>
 
    </div>
</div>
    <div id="post-footer">
        <div>
            <div class="navlinks">
  <a href="/posts/2013-12-22_nAnicitus-Release-V0140.html" title="Previous Post: nAnicitus release - V0.1.4.0" class="navlinks-prev">&laquo; nAnicitus release - V0.1.4.0</a>
  <a href="/posts/2013-12-27_Sherlock-Release-V0480.html" title="Next Post: Sherlock release - V0.4.8.0" class="navlinks-next">Sherlock release - V0.4.8.0 &raquo;</a>
</div>
        </div>
    </div>
    
    <script type="text/javascript" src="http://datejs.googlecode.com/svn/trunk/build/date-en-US.js"></script>

    <!--
    <script type="text/javascript">
      $("#post p").each( function(index) {
        if (index > 0 && $.trim($(this).text()).length > 0) {
          $(this).attr("id", "par" + index.toString());
          var html = $(this).html();
          $(this).html(html + " <a href='#par" + index.toString() + "'>#</a>");
        }
      });
    </script>
    -->
    
    <div id="disqus_thread">
        <noscript>
            Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
    </div>
    <script type="text/javascript">
        var disqus_shortname = '';
        var disqus_url = 'http://www.petrikvandervelde.nl/posts/2013-12-24_Setting-up-Sherlock-verification.html';
        var disqus_identifier = disqus_url;
        var disqus_title = 'Sherlock configuration - Verification';

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
</div>
        </div>
    </div>
    <div id="footer" class="container">
        <div id="fbox1">
            <h2>Related</h2>

<ul>
    <li id="first"><a href="https://github.com/pvandervelde">GitHub</a></li>
    <li><a href="http://www.linkedin.com/profile/view?id=33950311">LinkedIn</a></li>
    <li><a href="http://stackoverflow.com/users/539846/petrik">StackOverflow</a></li>
    <li><a href="http://careers.stackoverflow.com/pvandervelde">StackOverflow Careers</a></li>
    <li><a href="https://plus.google.com/+PatrickvanderVelde/about">Google+</a></li>
</ul>
        </div>
        <div id="fbox2">
            <h2 id="copyright">Copyright</h2>
<p>Copyright (c) 2013 <a href="http://www.petrikvandervelde.nl">http://www.petrikvandervelde.nl</a>. All rights reserved.</p>
<h2 id="disclaimer">Disclaimer</h2>
<p>The opinions expressed herein are my own personal opinions and do not represent my employer&#39;s view in any way.</p>

        </div>
        <div id="fbox3">
            <h2 id="media">Media</h2>
<p><a href="/atom.xml"><img src="/images/feed.png" alt="Atom feed"></a></p>

        </div>
    </div>
    <div id="copyright" class="container">
        <p>
            Site design based on the <a href="http://www.freecsstemplates.org/previews/opentools/">Open Tools</a> design 
            by <a href="http://www.freecsstemplates.org">FreeCSSTemplates.org</a>.
        </p>
        <p>
            Feed icon by <a href="http://www.icojam.com/">Icojam</a> and Favicon by 
            <a href="http://www.flaticon.com/free-icon/twister-sky-wind_12318" title="Yannick">Yannick</a> 
            from <a href="http://www.flaticon.com" title="Flaticon">www.flaticon.com</a>
        </p>
        <p>Generated by <a href="http://docpad.org/" rel="nofollow">DocPad</a> on Thursday, October 02, 2014.</p>
    </div>

    <!-- jQuery -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="/vendor/jquery.js"><\/script>')</script>

    <!-- DocPad Scripts + Our Own -->
    <script >(function(){
	/* Did we just livereload? */
var log = !!(localStorage && console && console.log && true);
if ( log && localStorage.getItem('/docpad-livereload/reloaded') === 'yes' ) {
	localStorage.removeItem('/docpad-livereload/reloaded');
	console.log('LiveReload completed at', new Date())
}

/* Listen for the regenerated event and perform a reload of the page when the event occurs */
var listen = function(){
	var primus = new Primus('/docpad-livereload');
	primus.on('data', function(data){
		if ( data && data.message ) {
			if ( data.message === 'generateBefore' ) {
				if ( log ) {
					console.log('LiveReload started at', new Date());
				}
				if ( typeof document.getElementsByTagName !== 'undefined' ) {
	document.getElementsByTagName('html')[0].className += ' wait';
}
			}
			else if ( data.message === 'generateAfter' ) {
				if ( log ) {
					localStorage.setItem('/docpad-livereload/reloaded', 'yes');
				}
				document.location.reload();
			}
		}
	});
};
	/* Inject socket into our page */
var inject = function(){
	var t = document.createElement('script');
	t.type = 'text/javascript';
	t.async = 'async';
	t.src = '/primus/primus.js';
	t.onload = listen;
	var s = document.getElementsByTagName('script')[0];
	s.parentNode.insertBefore(t, s);
};
	if ( typeof Primus !== 'undefined' ) {
		listen();
	} else {
		inject();
	}
})();</script><script >(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-46605109-1');
ga('send', 'pageview');</script><script defer="defer"  src="/vendor/log.js"></script><script defer="defer"  src="/vendor/modernizr.js"></script><script defer="defer"  src="/scripts/script.js"></script>
</body>
</html>